import{u as f,i as d,a as C,I as F,b as P,c as l,d as i,e as x,f as m,g as v,j as p,h as s,F as y}from"./index-8a1f8f8c.js";const h=n=>(o,e)=>{f(([t,r]=[])=>((r||!r)&&(r&&C(r,e)?t=t||!0:(d(t)&&t(),t=null)),[t,e]),([t,r],c)=>c?(d(t)&&t(),[]):[t||o(),r],n)},E=h(F),j=h(P),I=n=>{const o=l();return f((e=[])=>{if(!e[1]){const t=r=>d(r)?r(e[0]):r;e[0]=t(n),e[1]=r=>{r=t(r),e[0]!==r&&(e[0]=r,o())}}return e})},V=(n,o={})=>{const e=i();return e[n]||(e[n]=(t=o.detail)=>x(e.current,{type:n,...o,detail:t})),e[n]},U=(n,o)=>{const e=i();j(()=>v(e.current,"ConnectContext",t=>{n===t.detail.id&&(t.stopPropagation(),t.detail.connect(o))}),[n])},k=n=>{const o=V("ConnectContext",{bubbles:!0,composed:!0}),e=()=>{let c;return o({id:n,connect(b){c=b}}),c},[t,r]=I(e);return E(()=>{r(e)},[n]),t},B=n=>{const o=k(n),e=l();return E(()=>{if(o)return v(o,"UpdatedValue",e)},[o]),(o||n).value},H=n=>{const o=()=>void U(e,i().current);o.props={value:{type:Object,event:{type:"UpdatedValue"},value:()=>n}};const e=m(o);return e.value=n,e},u=H({color:"red"});customElements.define("my-theme",u);function M(){const{color:n}=B(u);return p("host",{children:["color: ",n]})}const a=m(M);customElements.define("my-button",a);const w=p(y,{children:[s(u,{value:{color:"red"},children:s(a,{})}),s(u,{value:{color:"black"},children:s(a,{})}),s(u,{value:{color:"orange"},children:s(a,{})})]});export{w as default};
